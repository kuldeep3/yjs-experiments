{"ast":null,"code":"/**\n * Utility module to create and manipulate Iterators.\n *\n * @module iterator\n */\n\n/**\n * @template T,R\n * @param {Iterator<T>} iterator\n * @param {function(T):R} f\n * @return {IterableIterator<R>}\n */\nexport const mapIterator = (iterator, f) => ({\n  [Symbol.iterator]() {\n    return this;\n  },\n\n  // @ts-ignore\n  next() {\n    const r = iterator.next();\n    return {\n      value: r.done ? undefined : f(r.value),\n      done: r.done\n    };\n  }\n\n});\n/**\n * @template T\n * @param {function():IteratorResult<T>} next\n * @return {IterableIterator<T>}\n */\n\nexport const createIterator = next => ({\n  /**\n   * @return {IterableIterator<T>}\n   */\n  [Symbol.iterator]() {\n    return this;\n  },\n\n  // @ts-ignore\n  next\n});\n/**\n * @template T\n * @param {Iterator<T>} iterator\n * @param {function(T):boolean} filter\n */\n\nexport const iteratorFilter = (iterator, filter) => createIterator(() => {\n  let res;\n\n  do {\n    res = iterator.next();\n  } while (!res.done && !filter(res.value));\n\n  return res;\n});\n/**\n * @template T,M\n * @param {Iterator<T>} iterator\n * @param {function(T):M} fmap\n */\n\nexport const iteratorMap = (iterator, fmap) => createIterator(() => {\n  const {\n    done,\n    value\n  } = iterator.next();\n  return {\n    done,\n    value: done ? undefined : fmap(value)\n  };\n});","map":{"version":3,"names":["mapIterator","iterator","f","Symbol","next","r","value","done","undefined","createIterator","iteratorFilter","filter","res","iteratorMap","fmap"],"sources":["/Users/kuldeepupreti/Downloads/Projects/personal/yjs/node_modules/lib0/iterator.js"],"sourcesContent":["/**\n * Utility module to create and manipulate Iterators.\n *\n * @module iterator\n */\n\n/**\n * @template T,R\n * @param {Iterator<T>} iterator\n * @param {function(T):R} f\n * @return {IterableIterator<R>}\n */\nexport const mapIterator = (iterator, f) => ({\n  [Symbol.iterator] () {\n    return this\n  },\n  // @ts-ignore\n  next () {\n    const r = iterator.next()\n    return { value: r.done ? undefined : f(r.value), done: r.done }\n  }\n})\n\n/**\n * @template T\n * @param {function():IteratorResult<T>} next\n * @return {IterableIterator<T>}\n */\nexport const createIterator = next => ({\n  /**\n   * @return {IterableIterator<T>}\n   */\n  [Symbol.iterator] () {\n    return this\n  },\n  // @ts-ignore\n  next\n})\n\n/**\n * @template T\n * @param {Iterator<T>} iterator\n * @param {function(T):boolean} filter\n */\nexport const iteratorFilter = (iterator, filter) => createIterator(() => {\n  let res\n  do {\n    res = iterator.next()\n  } while (!res.done && !filter(res.value))\n  return res\n})\n\n/**\n * @template T,M\n * @param {Iterator<T>} iterator\n * @param {function(T):M} fmap\n */\nexport const iteratorMap = (iterator, fmap) => createIterator(() => {\n  const { done, value } = iterator.next()\n  return { done, value: done ? undefined : fmap(value) }\n})\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,WAAW,GAAG,CAACC,QAAD,EAAWC,CAAX,MAAkB;EAC3C,CAACC,MAAM,CAACF,QAAR,IAAqB;IACnB,OAAO,IAAP;EACD,CAH0C;;EAI3C;EACAG,IAAI,GAAI;IACN,MAAMC,CAAC,GAAGJ,QAAQ,CAACG,IAAT,EAAV;IACA,OAAO;MAAEE,KAAK,EAAED,CAAC,CAACE,IAAF,GAASC,SAAT,GAAqBN,CAAC,CAACG,CAAC,CAACC,KAAH,CAA/B;MAA0CC,IAAI,EAAEF,CAAC,CAACE;IAAlD,CAAP;EACD;;AAR0C,CAAlB,CAApB;AAWP;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAME,cAAc,GAAGL,IAAI,KAAK;EACrC;AACF;AACA;EACE,CAACD,MAAM,CAACF,QAAR,IAAqB;IACnB,OAAO,IAAP;EACD,CANoC;;EAOrC;EACAG;AARqC,CAAL,CAA3B;AAWP;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMM,cAAc,GAAG,CAACT,QAAD,EAAWU,MAAX,KAAsBF,cAAc,CAAC,MAAM;EACvE,IAAIG,GAAJ;;EACA,GAAG;IACDA,GAAG,GAAGX,QAAQ,CAACG,IAAT,EAAN;EACD,CAFD,QAES,CAACQ,GAAG,CAACL,IAAL,IAAa,CAACI,MAAM,CAACC,GAAG,CAACN,KAAL,CAF7B;;EAGA,OAAOM,GAAP;AACD,CANiE,CAA3D;AAQP;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,WAAW,GAAG,CAACZ,QAAD,EAAWa,IAAX,KAAoBL,cAAc,CAAC,MAAM;EAClE,MAAM;IAAEF,IAAF;IAAQD;EAAR,IAAkBL,QAAQ,CAACG,IAAT,EAAxB;EACA,OAAO;IAAEG,IAAF;IAAQD,KAAK,EAAEC,IAAI,GAAGC,SAAH,GAAeM,IAAI,CAACR,KAAD;EAAtC,CAAP;AACD,CAH4D,CAAtD"},"metadata":{},"sourceType":"module"}